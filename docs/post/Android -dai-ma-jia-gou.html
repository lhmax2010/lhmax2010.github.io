<!DOCTYPE html>
<html data-color-mode="light" data-dark-theme="dark" data-light-theme="light" lang="zh-CN">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />
    
    <link rel="icon" href="https://github.githubassets.com/favicons/favicon.svg"><script>
        let theme = localStorage.getItem("meek_theme") || "light";
        document.documentElement.setAttribute("data-color-mode", theme);
    </script>
<meta name="description" content="### Android 架构
Refer https://source.android.com/docs/core/architecture?hl=zh-cn
![Image](https://github.com/user-attachments/assets/d62a8932-05dc-40d3-b406-57c9005daad9)

### 代码框架整理
### Linux Kernel 层
| 大类             | 子模块              | 主要功能                                 | 代码路径                                         |
|------------------|---------------------|------------------------------------------|--------------------------------------------------|
| GKI 与厂商驱动   | GKI 核心            | 通用内核，简化配置，支撑主线生态         | kernel/                                          |
| GKI 与厂商驱动   | Vendor 驱动         | 厂商专用硬件驱动，模块化加载             | vendor/ 、 hardware/                             |
| GKI 与厂商驱动   | KGSL                | 高通 Adreno GPU 驱动，管理 GPU 资源/功耗/命令 | drivers/gpu/msm/kgsl/                        |
| Android专有模块  | Binder              | 主 IPC 机制，进程间对象/RPC通信          | drivers/android/binder/                          |
| Android专有模块  | Ashmem              | 匿名共享内存（高效进程间共享）           | drivers/staging/android/ashmem.c                 |
| Android专有模块  | Lowmemorykiller     | 低内存回收（LMK，内核/用户空间）         | drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/ |
| Android专有模块  | IOCTL 框架          | 标准 I/O 控制接口                        | drivers/                                         |
| Android专有模块  | 电源管理            | CPU 频率调节、wakelock、休眠唤醒         | drivers/cpufreq/ , kernel/power/                 |
| Android专有模块  | SELinux             | 强制访问控制，保障系统安全               | security/selinux/                                |
| Android专有模块  | Vendor Modules      | 各类厂商专用硬件驱动                     | vendor/ 、 hardware/                             |
| Android专有模块  | RIL                 | 无线通信接口                             | system/rild/                                     |
| 内存管理         | LMK                 | 低内存回收机制（内核/用户空间）          | drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/ |
| 内存管理         | ZRAM                | 压缩内存，提升低端设备内存利用           | drivers/staging/zram/                            |
| 内存管理         | Buddy System        | 物理内存分配与合并                       | mm/compaction.c                                  |
| 内存管理         | Slab/SLUB 分配器    | 内核对象缓存池式分配                     | mm/slab.c , mm/slub.c                            |
| 内存管理         | ION                 | 多媒体/SoC物理内存分配与共享             | drivers/staging/android/ion/                     |
| 内存管理         | DMA-BUF             | 跨驱动共享物理内存标准接口               | drivers/dma-buf/                                 |
| 文件系统与存储   | EXT4                | 默认文件系统，高性能高可靠               | fs/ext4/                                         |
| 文件系统与存储   | F2FS                | 针对 Flash 优化的文件系统                | fs/f2fs/                                         |
| 文件系统与存储   | 加密文件系统        | FSCRYPT/LUKS 文件系统加密                | fs/crypto/                                       |
| 文件系统与存储   | Vold                | 存储管理守护进程，挂载/卸载/OTG管理      | system/core/vold/                                |
| 文件系统与存储   | DM-Verity           | 只读分区完整性校验，防篡改               | drivers/md/                                      |
| 文件系统与存储   | Keymaster HAL       | 密钥管理/安全生成功能                    | hardware/interfaces/security/keymint/aidl/       |
| 网络             | TCP/IP 协议栈       | IPv4/IPv6/TCP/UDP 网络通信               | net/ipv4/ , net/ipv6/                            |
| 网络             | Wi-Fi 驱动          | 无线网卡、Wi-Fi 管理                     | drivers/net/wireless/                            |
| 网络             | 蓝牙驱动            | 蓝牙协议栈驱动                           | drivers/bluetooth/                               |
| 网络             | Netfilter           | 防火墙/NAT/数据包过滤                    | net/netfilter/                                   |
| 安全性           | SELinux             | 强制访问控制                             | security/selinux/                                |
| 安全性           | HSM                 | 硬件安全模块，加密运算加速               | drivers/crypto/                                  |
| 安全性           | AppArmor（可选）    | 可选安全沙箱策略                         | security/apparmor/                               |
| 中断/硬件管理    | 中断管理            | 硬件/软件中断分发和处理                  | kernel/irq/                                      |
| 中断/硬件管理    | GPU 驱动            | Adreno/Mali 等 GPU 内核驱动              | drivers/gpu/ , drivers/gpu/msm/kgsl/             |
| 中断/硬件管理    | 传感器驱动          | 各类传感器（加速度计、陀螺仪等）         | drivers/iio/                                     |
| 中断/硬件管理    | 输入设备驱动        | 触摸屏、键盘等输入设备                   | drivers/input/                                   |

### Native Libraries 层
| 类别       | 名称             | 主要功能                           | 代码路径                                         |
|------------|------------------|------------------------------------|--------------------------------------------------|
| 基础库     | Bionic libc      | C 标准库，系统调用、内存分配       | bionic/                                          |
| 基础库     | libc++           | C++ 标准库                         | external/libcxx/                                 |
| 基础库     | libm             | 数学函数库                         | bionic/libm/                                     |
| 系统基础   | liblog           | 日志接口                           | system/core/liblog/                              |
| 系统基础   | libbinder        | Binder IPC 支持                    | frameworks/native/libs/binder/                    |
| 系统基础   | libutils         | 字符串、Mutex、引用计数等工具      | system/core/libutils/                            |
| 系统基础   | libandroid       | Native 和 Java 桥接接口            | frameworks/native/libs/android/                   |
| 系统基础   | libnativehelper  | JNI 辅助库                         | frameworks/native/libs/nativehelper/              |
| 安全      | libselinux        | SELinux 支持库                     | external/selinux/libselinux/                     |
| 安全      | libcrypto         | 加密算法库                         | external/openssl/                                |
| 安全      | libssl            | SSL/TLS 支持                       | external/openssl/                                |
| 算法/压缩 | libz              | 压缩算法库（zlib）                 | external/zlib/                                   |
| 多媒体     | libjpeg           | JPEG 图像解码                      | external/libjpeg-turbo/                          |
| 多媒体     | libpng            | PNG 图像解码                       | external/libpng/                                 |
| 多媒体     | libwebp           | WebP 图像处理                      | external/libwebp/                                |
| 多媒体     | libskia           | 2D 图形渲染                        | external/skia/                                   |
| 图形       | libEGL/libGLES    | OpenGL ES 支持                     | frameworks/native/opengl/                        |
| 图形       | libvulkan         | Vulkan 支持                        | external/vulkan/                                 |
| 摄像头     | libcamera         | 摄像头 HAL 通用库                  | external/libcamera/                              |
| 输入       | libinput          | 输入设备支持                       | system/core/libinput/                            |
| 多媒体     | libstagefright    | 多媒体编解码                       | frameworks/av/media/libstagefright/              |
| 多媒体     | libmediandk       | 多媒体原生接口                     | frameworks/av/media/ndk/                         |
| 序列化     | libprotobuf       | Protocol Buffers 序列化库          | external/protobuf/                               |
| ART        | libdexfile        | DEX 字节码解析与支持               | art/libdexfile/                                  |
| ART        | libart            | ART 虚拟机核心库                   | art/runtime/                                     |

### Native Deamons 层
| 类别           | 名称             | 主要功能                                    | 代码路径                                       |
|----------------|------------------|---------------------------------------------|------------------------------------------------|
| 启动/管理      | init             | 系统启动初始化，启动守护进程                | system/core/init/                              |
| 调试           | adbd             | ADB 调试守护进程                            | system/core/adb/                               |
| 存储           | vold             | 存储设备管理（挂载、加密、OTG等）           | system/vold/                                   |
| 网络           | netd             | 网络配置、DNS、防火墙等                      | system/netd/                                   |
| 日志           | logd             | 系统日志服务                                 | system/core/logd/                              |
| 管理           | servicemanager   | Binder 服务管理器                            | frameworks/native/cmds/servicemanager/         |
| 应用孵化       | zygote           | 应用进程孵化器，启动 Java 应用               | frameworks/base/cmds/zygote/                   |
| 图形           | surfaceflinger   | 图形合成服务，负责屏幕显示                   | frameworks/native/services/surfaceflinger/      |
| 内存           | lmkd             | Low Memory Killer Daemon 内存回收守护进程    | system/memory/lmkd/                            |
| 无线           | rild             | 无线通信守护进程（Radio Interface Layer）    | hardware/ril/                                  |
| 电池           | healthd          | 电池和健康状态监控                           | system/core/healthd/                           |
| 安全           | keystore         | 密钥/证书安全管理                            | system/security/keystore/                      |
| 安装           | installd         | APK 安装、数据目录管理                        | system/extras/installd/                        |
| DRM            | drmserver        | 数字版权管理（DRM）服务                      | frameworks/av/drm/drmserver/                   |
| 安全           | gatekeeperd      | 屏幕解锁验证（Gatekeeper HAL）               | system/gatekeeperd/                            |
| 统计           | statsd           | 统计与遥测收集服务                           | frameworks/base/cmds/statsd/                   |

### HAL(Harware Abstraction Layer) 层
| 模块             | 功能描述                                                   | 代码路径                                                          |
|------------------|------------------------------------------------------------|-------------------------------------------------------------------|
| audio            | 音频采集、播放、处理和音频硬件控制                         | hardware/interfaces/audio/aidl/                                  |
| camera           | 摄像头操作、采集、拍照、视频录制、参数调节                  | hardware/interfaces/camera/aidl/                                 |
| graphics         | 显示合成（HWC）、图形 buffer 分配、显示刷新                 | hardware/interfaces/graphics/composer/aidl/ <br> hardware/interfaces/graphics/allocator/aidl/ |
| light            | 屏幕、键盘、通知 LED 灯光控制                              | hardware/interfaces/light/aidl/                                  |
| vibrator         | 振动器控制（马达驱动、震感反馈）                           | hardware/interfaces/vibrator/aidl/                               |
| sensors          | 各类传感器（加速度、陀螺仪、磁力、环境、计步等）            | hardware/interfaces/sensors/aidl/                                |
| biometrics       | 指纹、人脸、虹膜等生物识别接口                             | hardware/interfaces/biometrics/fingerprint/aidl/ <br> hardware/interfaces/biometrics/face/aidl/ |
| bluetooth        | 蓝牙功能（扫描、配对、音频、BLE等）                        | hardware/interfaces/bluetooth/aidl/                              |
| wifi             | 无线网络（Wi-Fi）配置、扫描、连接、热点                     | hardware/interfaces/wifi/aidl/                                   |
| gnss             | 卫星定位（GPS、GLONASS、北斗、Galileo）                     | hardware/interfaces/gnss/aidl/                                   |
| radio            | 无线通信（蜂窝基带，电话、短信、数据、SIM等）               | hardware/interfaces/radio/aidl/                                  |
| nfc              | 近场通信（NFC）                                            | hardware/interfaces/nfc/aidl/                                    |
| usb              | USB 设备检测、模式切换、充电控制                           | hardware/interfaces/usb/aidl/                                    |
| thermal          | 芯片、CPU/GPU/电池等温度采集与管理                         | hardware/interfaces/thermal/aidl/                                |
| health           | 电池健康、电量、温度、电池状态采集与上报                   | hardware/interfaces/health/aidl/                                 |
| power            | 电源管理（省电模式、唤醒、休眠、boost等）                  | hardware/interfaces/power/aidl/                                  |
| keymaster        | 密钥/加密硬件支持（安全密钥生成、签名、硬件安全区）        | hardware/interfaces/security/keymint/aidl/                       |
| gatekeeper       | 锁屏密码/生物识别 gatekeeper 认证支持                      | hardware/interfaces/gatekeeper/aidl/                             |
| drm              | 数字版权管理（DRM），密钥协商、内容保护                    | hardware/interfaces/drm/aidl/                                    |
| automotive       | 车载信息娱乐、CAN 总线、仪表盘等车辆相关控制               | hardware/interfaces/automotive/                                  |
| graphics_mapper  | GraphicBuffer Mapper，图形内存映射接口                      | hardware/interfaces/graphics/mapper/aidl/                        |
| media            | 多媒体硬件加速（视频编解码、音频处理、Camera ISP）         | hardware/interfaces/media/aidl/                                  |
| configstore      | 配置信息存取，提供 SoC/HW 相关参数                         | hardware/interfaces/configstore/aidl/                            |
| display          | 显示输出（Display HAL，屏幕参数、亮度、刷新率等）           | hardware/interfaces/display/aidl/                                |
| input            | 输入设备（键盘、触控板、手写笔等）管理和事件采集           | hardware/interfaces/input/aidl/                                  |
| boot             | 设备启动、bootloader 状态、分区切换                        | hardware/interfaces/boot/aidl/                                   |
| fastboot         | fastboot 模式和接口实现                                    | hardware/interfaces/fastboot/aidl/                               |
| time             | 时间管理、RTC、系统时间设置                                 | hardware/interfaces/time/aidl/                                   |
| secure_element   | SE（安全芯片，NFC/支付/安全存储等）接口                     | hardware/interfaces/secure_element/aidl/                         |
| identity         | 身份认证、证件接口（如 eID、国密、护照等）                  | hardware/interfaces/identity/aidl/                               |
| oemlock          | OEM 锁控制（设备解锁、bootloader 锁等）                     | hardware/interfaces/oemlock/aidl/                                |
| wifi_offload     | Wi-Fi 卸载、低功耗扫描等                                   | hardware/interfaces/wifi/offload/aidl/                           |
| confirmationui   | 安全确认 UI 支持                                           | hardware/interfaces/confirmationui/aidl/                         |
| soundtrigger     | 声音唤醒（如“OK Google”热词检测）                          | hardware/interfaces/soundtrigger/aidl/                           |

### TV HAL 层
| 模块             | 功能描述                                                   | 代码路径                                                          |
|------------------|------------------------------------------------------------|-------------------------------------------------------------------|
| tv_input         | 电视输入源（HDMI、ATV、DTV、AV、Component 等）管理         | hardware/interfaces/tv/input/aidl/                                |
| tv_cec           | HDMI CEC (Consumer Electronics Control) 控制和事件          | hardware/interfaces/tv/cec/aidl/                                  |
| tv_tuner         | 电视调谐器（DVB/ATSC/ISDB）支持，频道扫描、播放             | hardware/interfaces/tv/tuner/aidl/                                |
| tv_audio          | 电视音频输入、解码、音效处理                               | hardware/interfaces/tv/audio/aidl/                                |
| tv_hdmi           | HDMI 输入检测与管理，EDID、热插拔、模式切换                | hardware/interfaces/tv/hdmi/aidl/                                 |
| tv_smartcard      | 电视智能卡（CA 解密、授权、付费电视等）接口                | hardware/interfaces/tv/smartcard/aidl/                            |
| tv_ci             | 条件接收（CAM 卡、Conditional Access）管理                 | hardware/interfaces/tv/ci/aidl/                                   |
| tv_wakeup         | TV 唤醒（遥控器、HDMI CEC 唤醒、定时唤醒等）               | hardware/interfaces/tv/wakeup/aidl/                               |
| tv_input_control  | 电视输入切换、信号状态管理                                | hardware/interfaces/tv/inputcontrol/aidl/                         |
| tv_antenna        | 天线、信号强度、信号质量检测与控制                         | hardware/interfaces/tv/antenna/aidl/                              |
| tv_overlay        | TV 画中画（PIP）、OSD、图层叠加控制                        | hardware/interfaces/tv/overlay/aidl/                              |
| tv_dvr            | 数字录像（DVR，录制电视节目、回放）                        | hardware/interfaces/tv/dvr/aidl/                                  |
| tv_hbbtv          | HbbTV（混合广播宽带电视标准）应用与数据接口                 | hardware/interfaces/tv/hbbtv/aidl/                                |
| tv_boot           | TV 专用开机流程、待机与恢复控制                            | hardware/interfaces/tv/boot/aidl/                                 |
| tv_remote         | 电视遥控器（红外/Bluetooth/语音）事件采集和管理            | hardware/interfaces/tv/remote/aidl/                               |
| tv_hdmi_arc       | HDMI ARC（音频回传通道）/eARC 支持                          | hardware/interfaces/tv/hdmi_arc/aidl/                             |

### ART(Android Runtime) 层
| 模块             | 功能描述                                                   | 代码路径                                  |
|------------------|------------------------------------------------------------|-------------------------------------------|
| runtime          | ART 虚拟机主运行时环境，负责类加载、内存管理、线程调度、异常处理、GC、JIT/AOT 执行 | art/runtime/                             |
| dex2oat          | DEX 到 OAT（本地代码）的 AOT 编译工具                       | art/dex2oat/                              |
| odrefresh        | OAT/DEX 优化与刷新的守护与工具，增量重编译与文件一致性检测   | art/odrefresh/                            |
| oatdump          | OAT 文件结构、内容及本地代码分析与调试工具                  | art/oatdump/                              |
| dalvikvm         | Dalvik 兼容入口（历史兼容层，实际调用 ART runtime）         | art/dalvikvm/                             |
| libart           | ART VM 核心运行时库与平台适配                              | art/libartbase/ <br> art/libartpalette/   |
| libdexfile       | DEX 字节码格式解析、操作与校验                               | art/libdexfile/                           |
| libart-compiler  | ART 编译器核心，字节码到本地代码转换、优化                   | art/compiler/                             |
| libart-disassembler | 字节码与本地指令反汇编分析                               | art/disassembler/                         |
| libartbase       | ART 基础工具、数据结构、日志、调试支持                      | art/libartbase/                           |
| libartpalette    | 平台适配接口，跨架构/OS 抽象层                              | art/libartpalette/                        |
| gc               | 垃圾回收（GC）模块，内存回收算法与调优                      | art/runtime/gc/                           |
| jit              | 即时编译（JIT），运行时热点代码本地化与优化                  | art/runtime/jit/                          |
| interpreter      | 字节码解释器，DEX 指令动态调度执行                          | art/runtime/interpreter/                   |
| imgdiag          | Image 文件分析工具（system image 校验与分析）               | art/imgdiag/                              |
| profile          | 方法/代码块热度分析、profile 数据收集与利用                  | art/profile/                              |
| quick            | 快速方法调用和内联、调用链优化等                            | art/runtime/quick/                        |
| signal_catcher   | 信号捕捉与故障转储（crash、ANR、native 信号管理）           | art/runtime/signal_catcher.cc             |
| monitor          | 对象锁、同步、Monitor 机制实现                              | art/runtime/monitor.cc                    |
| verifier         | DEX 字节码静态校验与安全验证                                | art/runtime/verifier/                     |
| debugger         | Java 调试接口 JDWP/断点/单步执行等                          | art/runtime/debugger/                     |
| trace            | 方法调用/性能追踪与分析支持                                 | art/runtime/trace/                        |
| hidden_api       | 隐藏 API 管控，防止 App 访问系统私有接口                     | art/runtime/hidden_api/                   |
| hprof            | Java 堆内存快照与分析工具（heap profiler）                  | art/runtime/hprof/                        |
| jdwp             | Java 调试线协议实现（JDWP）                                 | art/runtime/jdwp/                         |
| libcore          | Java 标准库与通用 API 实现（集合、IO、网络、XML、加密、ICU 等），为 ART/Java Framework 提供核心类库支持 | libcore/                                 |
| OAT（.oat 文件） | ART 将 DEX 字节码 AOT 编译后的产物，包含本地机器码和元数据，提升启动和执行效率 | art/dex2oat/ <br> art/runtime/oat_file.h <br> art/oatdump/ <br> art/odrefresh/ |
| JNI              | Java 层与 native（C/C++）代码互操作桥梁，实现方法调用、数据转换、线程/对象管理 | art/runtime/jni/ <br> libcore/ojluni/src/main/native/include/jni.h |
| libnativebridge  | Native Bridge 机制实现，不同架构下 native so 的兼容仿真加载，跨 ABI 支持 | art/libnativebridge/                      |
| libnativeloader  | 动态库加载与命名空间隔离机制，管理 so 加载路径、安全隔离与卸载 | art/libnativeloader/                      |

### Android Framework层
| 模块                | 功能描述                                                      | 主要代码路径                                |
|---------------------|---------------------------------------------------------------|---------------------------------------------|
| ActivityManager     | 应用组件生命周期管理、进程调度、任务栈管理、后台管控           | frameworks/base/services/core/java/com/android/server/am/         |
| PackageManager      | APK 安装/卸载、包管理、权限管理、签名校验、分区               | frameworks/base/services/core/java/com/android/server/pm/         |
| WindowManager       | 窗口/层级管理、窗口动画、输入分发、屏幕适配                    | frameworks/base/services/core/java/com/android/server/wm/         |
| InputManager        | 输入事件收集、分发、输入设备（键盘、触控、鼠标、遥控）管理      | frameworks/base/services/core/java/com/android/server/input/ <br> frameworks/base/core/java/android/hardware/input/ |
| DisplayManager      | 屏幕显示设备管理、投屏、分辨率切换、亮度控制                   | frameworks/base/services/core/java/com/android/server/display/    |
| PowerManager        | 电源管理、休眠/唤醒、亮度/省电控制、Wakelock                  | frameworks/base/services/core/java/com/android/server/power/      |
| NotificationManager | 通知管理、消息推送、渠道与权限控制、锁屏与前台通知             | frameworks/base/services/core/java/com/android/server/notification/ <br> frameworks/base/core/java/android/app/NotificationManager.java |
| AlarmManager        | 定时任务调度、闹钟服务                                         | frameworks/base/services/core/java/com/android/server/alarm/      |
| ResourceManager     | 应用与系统资源（布局、图片、字符串、样式、主题）加载与管理     | frameworks/base/core/java/android/content/res/ <br> frameworks/base/libs/androidfw/ <br> frameworks/base/services/core/java/com/android/server/ |
| LocationManager     | 定位服务、位置更新、地理围栏、GPS/网络定位                     | frameworks/base/services/core/java/com/android/server/location/   |
| ConnectivityManager | 网络连接、Wi-Fi/蜂窝/以太网、VPN、代理、网络切换               | frameworks/base/services/core/java/com/android/server/connectivity/|
| TelephonyManager    | 蜂窝网络、通话、短信、SIM 卡、信号强度                         | frameworks/opt/telephony/src/java/com/android/internal/telephony/ |
| WifiManager         | 无线网络连接、Wi-Fi 扫描、热点、状态监听                       | frameworks/opt/net/wifi/service/java/com/android/server/wifi/     |
| BluetoothManager    | 蓝牙连接、设备配对、BLE、音频控制                              | packages/modules/Bluetooth/service/java/com/android/server/bluetooth/ |
| AudioManager        | 音频策略、音量、输出/输入路由、音效                            | frameworks/base/services/core/java/com/android/server/audio/      |
| MediaSessionManager | 多媒体播放会话、媒体控制、通知交互                             | frameworks/base/services/core/java/com/android/server/media/      |
| CameraService       | 摄像头设备管理、拍照、预览、视频采集                           | frameworks/av/services/camera/libcameraservice/                  |
| SensorManager       | 传感器事件收集、数据融合、传感器策略                           | frameworks/base/services/core/java/com/android/server/sensor/     |
| JobSchedulerService | 后台任务调度、任务约束、Doze/省电兼容                         | frameworks/base/services/core/java/com/android/server/job/        |
| SystemUI            | 系统界面（状态栏、导航栏、通知栏、快设面板）                   | frameworks/base/packages/SystemUI/                               |
| PermissionManager   | 权限申请、授权、管理、特殊权限分发                             | frameworks/base/services/core/java/com/android/server/pm/permission/ |
| ContentProvider     | 跨应用数据共享、标准化数据访问接口（数据库、文件、网络等）      | frameworks/base/core/java/android/content/ContentProvider.java <br> frameworks/base/core/java/android/content/ |
| Views               | UI 视图系统，所有控件、布局、动画、事件分发基础                | frameworks/base/core/java/android/view/ <br> frameworks/base/core/java/android/widget/ |
| ClipboardService    | 剪贴板数据管理、读写、权限控制                                 | frameworks/base/services/core/java/com/android/server/clipboard/  |
| StorageManager      | 存储空间管理、分区、OTG 设备、加密、文件系统挂载               | frameworks/base/services/core/java/com/android/server/storage/    |
| MountService        | 存储挂载、卸载、监听、分区管理                                 | frameworks/base/services/core/java/com/android/server/mount/      |
| UsbService          | USB 设备检测、状态管理、MTP/PTP、权限分发                      | frameworks/base/services/usb/java/com/android/server/usb/         |
| PrintService        | 打印设备管理、打印任务、网络打印支持                           | frameworks/base/services/core/java/com/android/server/print/      |
| DevicePolicyManager | 企业设备管理、策略下发、远程锁定/擦除                          | frameworks/base/services/devicepolicy/java/com/android/server/devicepolicy/ |
| WallpaperManager    | 壁纸管理、壁纸设置、动态壁纸                                   | frameworks/base/services/core/java/com/android/server/wallpaper/  |
| AccessibilityManager| 辅助功能（无障碍）、读屏、放大镜、辅助输入                    | frameworks/base/services/core/java/com/android/server/accessibility/|
| BackupManager       | 数据备份与恢复、云备份接口                                     | frameworks/base/services/core/java/com/android/server/backup/     |
| RestrictionsManager | 家长控制、内容限制、应用限制                                  | frameworks/base/services/core/java/com/android/server/restrictions/|
| TrustManager        | 信任设备、解锁策略、设备信任级别                               | frameworks/base/services/core/java/com/android/server/trust/      |
| LockSettingsService | 锁屏设置、密码/指纹/面部识别管理                              | frameworks/base/services/core/java/com/android/server/locksettings/|
| AppOpsManager       | 应用操作权限控制、敏感操作监控                                | frameworks/base/services/core/java/com/android/server/appop/      |
| UsageStatsManager   | 应用使用统计、前后台检测、屏幕时间、限制策略                   | frameworks/base/services/usage/java/com/android/server/usage/     |
| ShortcutsManager    | 快捷方式管理、动态/固定快捷方式接口                           | frameworks/base/services/core/java/com/android/server/shortcuts/  |
| IncidentManager     | 故障报告、系统诊断、异常事件收集                              | frameworks/base/services/core/java/com/android/server/incident/   |
| StatsManager        | 性能统计、事件分析、系统指标采集                              | frameworks/base/services/core/java/com/android/server/stats/      |
| PolicyManager       | 电源/设备/安全策略统一管理接口                                | frameworks/base/services/core/java/com/android/server/policy/     |
| MediaService        | 多媒体会话管理、音视频路由、媒体资源分配与权限                 | frameworks/av/services/mediaresourcemanager/ <br> frameworks/base/services/core/java/com/android/server/media/ |
| MediaCodec          | 多媒体编解码标准接口，硬件加速编解码适配                      | frameworks/base/media/java/android/media/MediaCodec.java <br> frameworks/av/media/libstagefright/ |
| MediaExtractor      | 多媒体封装格式解析与音视频流提取                              | frameworks/base/media/java/android/media/MediaExtractor.java <br> frameworks/av/media/libstagefright/MediaExtractor.cpp |
| OpenMAX AL          | 多媒体硬件抽象标准接口，底层音视频硬件访问                    | frameworks/wilhelm/ <br> frameworks/base/media/jni/              |
。">
<meta property="og:title" content="Android 代码架构">
<meta property="og:description" content="### Android 架构
Refer https://source.android.com/docs/core/architecture?hl=zh-cn
![Image](https://github.com/user-attachments/assets/d62a8932-05dc-40d3-b406-57c9005daad9)

### 代码框架整理
### Linux Kernel 层
| 大类             | 子模块              | 主要功能                                 | 代码路径                                         |
|------------------|---------------------|------------------------------------------|--------------------------------------------------|
| GKI 与厂商驱动   | GKI 核心            | 通用内核，简化配置，支撑主线生态         | kernel/                                          |
| GKI 与厂商驱动   | Vendor 驱动         | 厂商专用硬件驱动，模块化加载             | vendor/ 、 hardware/                             |
| GKI 与厂商驱动   | KGSL                | 高通 Adreno GPU 驱动，管理 GPU 资源/功耗/命令 | drivers/gpu/msm/kgsl/                        |
| Android专有模块  | Binder              | 主 IPC 机制，进程间对象/RPC通信          | drivers/android/binder/                          |
| Android专有模块  | Ashmem              | 匿名共享内存（高效进程间共享）           | drivers/staging/android/ashmem.c                 |
| Android专有模块  | Lowmemorykiller     | 低内存回收（LMK，内核/用户空间）         | drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/ |
| Android专有模块  | IOCTL 框架          | 标准 I/O 控制接口                        | drivers/                                         |
| Android专有模块  | 电源管理            | CPU 频率调节、wakelock、休眠唤醒         | drivers/cpufreq/ , kernel/power/                 |
| Android专有模块  | SELinux             | 强制访问控制，保障系统安全               | security/selinux/                                |
| Android专有模块  | Vendor Modules      | 各类厂商专用硬件驱动                     | vendor/ 、 hardware/                             |
| Android专有模块  | RIL                 | 无线通信接口                             | system/rild/                                     |
| 内存管理         | LMK                 | 低内存回收机制（内核/用户空间）          | drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/ |
| 内存管理         | ZRAM                | 压缩内存，提升低端设备内存利用           | drivers/staging/zram/                            |
| 内存管理         | Buddy System        | 物理内存分配与合并                       | mm/compaction.c                                  |
| 内存管理         | Slab/SLUB 分配器    | 内核对象缓存池式分配                     | mm/slab.c , mm/slub.c                            |
| 内存管理         | ION                 | 多媒体/SoC物理内存分配与共享             | drivers/staging/android/ion/                     |
| 内存管理         | DMA-BUF             | 跨驱动共享物理内存标准接口               | drivers/dma-buf/                                 |
| 文件系统与存储   | EXT4                | 默认文件系统，高性能高可靠               | fs/ext4/                                         |
| 文件系统与存储   | F2FS                | 针对 Flash 优化的文件系统                | fs/f2fs/                                         |
| 文件系统与存储   | 加密文件系统        | FSCRYPT/LUKS 文件系统加密                | fs/crypto/                                       |
| 文件系统与存储   | Vold                | 存储管理守护进程，挂载/卸载/OTG管理      | system/core/vold/                                |
| 文件系统与存储   | DM-Verity           | 只读分区完整性校验，防篡改               | drivers/md/                                      |
| 文件系统与存储   | Keymaster HAL       | 密钥管理/安全生成功能                    | hardware/interfaces/security/keymint/aidl/       |
| 网络             | TCP/IP 协议栈       | IPv4/IPv6/TCP/UDP 网络通信               | net/ipv4/ , net/ipv6/                            |
| 网络             | Wi-Fi 驱动          | 无线网卡、Wi-Fi 管理                     | drivers/net/wireless/                            |
| 网络             | 蓝牙驱动            | 蓝牙协议栈驱动                           | drivers/bluetooth/                               |
| 网络             | Netfilter           | 防火墙/NAT/数据包过滤                    | net/netfilter/                                   |
| 安全性           | SELinux             | 强制访问控制                             | security/selinux/                                |
| 安全性           | HSM                 | 硬件安全模块，加密运算加速               | drivers/crypto/                                  |
| 安全性           | AppArmor（可选）    | 可选安全沙箱策略                         | security/apparmor/                               |
| 中断/硬件管理    | 中断管理            | 硬件/软件中断分发和处理                  | kernel/irq/                                      |
| 中断/硬件管理    | GPU 驱动            | Adreno/Mali 等 GPU 内核驱动              | drivers/gpu/ , drivers/gpu/msm/kgsl/             |
| 中断/硬件管理    | 传感器驱动          | 各类传感器（加速度计、陀螺仪等）         | drivers/iio/                                     |
| 中断/硬件管理    | 输入设备驱动        | 触摸屏、键盘等输入设备                   | drivers/input/                                   |

### Native Libraries 层
| 类别       | 名称             | 主要功能                           | 代码路径                                         |
|------------|------------------|------------------------------------|--------------------------------------------------|
| 基础库     | Bionic libc      | C 标准库，系统调用、内存分配       | bionic/                                          |
| 基础库     | libc++           | C++ 标准库                         | external/libcxx/                                 |
| 基础库     | libm             | 数学函数库                         | bionic/libm/                                     |
| 系统基础   | liblog           | 日志接口                           | system/core/liblog/                              |
| 系统基础   | libbinder        | Binder IPC 支持                    | frameworks/native/libs/binder/                    |
| 系统基础   | libutils         | 字符串、Mutex、引用计数等工具      | system/core/libutils/                            |
| 系统基础   | libandroid       | Native 和 Java 桥接接口            | frameworks/native/libs/android/                   |
| 系统基础   | libnativehelper  | JNI 辅助库                         | frameworks/native/libs/nativehelper/              |
| 安全      | libselinux        | SELinux 支持库                     | external/selinux/libselinux/                     |
| 安全      | libcrypto         | 加密算法库                         | external/openssl/                                |
| 安全      | libssl            | SSL/TLS 支持                       | external/openssl/                                |
| 算法/压缩 | libz              | 压缩算法库（zlib）                 | external/zlib/                                   |
| 多媒体     | libjpeg           | JPEG 图像解码                      | external/libjpeg-turbo/                          |
| 多媒体     | libpng            | PNG 图像解码                       | external/libpng/                                 |
| 多媒体     | libwebp           | WebP 图像处理                      | external/libwebp/                                |
| 多媒体     | libskia           | 2D 图形渲染                        | external/skia/                                   |
| 图形       | libEGL/libGLES    | OpenGL ES 支持                     | frameworks/native/opengl/                        |
| 图形       | libvulkan         | Vulkan 支持                        | external/vulkan/                                 |
| 摄像头     | libcamera         | 摄像头 HAL 通用库                  | external/libcamera/                              |
| 输入       | libinput          | 输入设备支持                       | system/core/libinput/                            |
| 多媒体     | libstagefright    | 多媒体编解码                       | frameworks/av/media/libstagefright/              |
| 多媒体     | libmediandk       | 多媒体原生接口                     | frameworks/av/media/ndk/                         |
| 序列化     | libprotobuf       | Protocol Buffers 序列化库          | external/protobuf/                               |
| ART        | libdexfile        | DEX 字节码解析与支持               | art/libdexfile/                                  |
| ART        | libart            | ART 虚拟机核心库                   | art/runtime/                                     |

### Native Deamons 层
| 类别           | 名称             | 主要功能                                    | 代码路径                                       |
|----------------|------------------|---------------------------------------------|------------------------------------------------|
| 启动/管理      | init             | 系统启动初始化，启动守护进程                | system/core/init/                              |
| 调试           | adbd             | ADB 调试守护进程                            | system/core/adb/                               |
| 存储           | vold             | 存储设备管理（挂载、加密、OTG等）           | system/vold/                                   |
| 网络           | netd             | 网络配置、DNS、防火墙等                      | system/netd/                                   |
| 日志           | logd             | 系统日志服务                                 | system/core/logd/                              |
| 管理           | servicemanager   | Binder 服务管理器                            | frameworks/native/cmds/servicemanager/         |
| 应用孵化       | zygote           | 应用进程孵化器，启动 Java 应用               | frameworks/base/cmds/zygote/                   |
| 图形           | surfaceflinger   | 图形合成服务，负责屏幕显示                   | frameworks/native/services/surfaceflinger/      |
| 内存           | lmkd             | Low Memory Killer Daemon 内存回收守护进程    | system/memory/lmkd/                            |
| 无线           | rild             | 无线通信守护进程（Radio Interface Layer）    | hardware/ril/                                  |
| 电池           | healthd          | 电池和健康状态监控                           | system/core/healthd/                           |
| 安全           | keystore         | 密钥/证书安全管理                            | system/security/keystore/                      |
| 安装           | installd         | APK 安装、数据目录管理                        | system/extras/installd/                        |
| DRM            | drmserver        | 数字版权管理（DRM）服务                      | frameworks/av/drm/drmserver/                   |
| 安全           | gatekeeperd      | 屏幕解锁验证（Gatekeeper HAL）               | system/gatekeeperd/                            |
| 统计           | statsd           | 统计与遥测收集服务                           | frameworks/base/cmds/statsd/                   |

### HAL(Harware Abstraction Layer) 层
| 模块             | 功能描述                                                   | 代码路径                                                          |
|------------------|------------------------------------------------------------|-------------------------------------------------------------------|
| audio            | 音频采集、播放、处理和音频硬件控制                         | hardware/interfaces/audio/aidl/                                  |
| camera           | 摄像头操作、采集、拍照、视频录制、参数调节                  | hardware/interfaces/camera/aidl/                                 |
| graphics         | 显示合成（HWC）、图形 buffer 分配、显示刷新                 | hardware/interfaces/graphics/composer/aidl/ <br> hardware/interfaces/graphics/allocator/aidl/ |
| light            | 屏幕、键盘、通知 LED 灯光控制                              | hardware/interfaces/light/aidl/                                  |
| vibrator         | 振动器控制（马达驱动、震感反馈）                           | hardware/interfaces/vibrator/aidl/                               |
| sensors          | 各类传感器（加速度、陀螺仪、磁力、环境、计步等）            | hardware/interfaces/sensors/aidl/                                |
| biometrics       | 指纹、人脸、虹膜等生物识别接口                             | hardware/interfaces/biometrics/fingerprint/aidl/ <br> hardware/interfaces/biometrics/face/aidl/ |
| bluetooth        | 蓝牙功能（扫描、配对、音频、BLE等）                        | hardware/interfaces/bluetooth/aidl/                              |
| wifi             | 无线网络（Wi-Fi）配置、扫描、连接、热点                     | hardware/interfaces/wifi/aidl/                                   |
| gnss             | 卫星定位（GPS、GLONASS、北斗、Galileo）                     | hardware/interfaces/gnss/aidl/                                   |
| radio            | 无线通信（蜂窝基带，电话、短信、数据、SIM等）               | hardware/interfaces/radio/aidl/                                  |
| nfc              | 近场通信（NFC）                                            | hardware/interfaces/nfc/aidl/                                    |
| usb              | USB 设备检测、模式切换、充电控制                           | hardware/interfaces/usb/aidl/                                    |
| thermal          | 芯片、CPU/GPU/电池等温度采集与管理                         | hardware/interfaces/thermal/aidl/                                |
| health           | 电池健康、电量、温度、电池状态采集与上报                   | hardware/interfaces/health/aidl/                                 |
| power            | 电源管理（省电模式、唤醒、休眠、boost等）                  | hardware/interfaces/power/aidl/                                  |
| keymaster        | 密钥/加密硬件支持（安全密钥生成、签名、硬件安全区）        | hardware/interfaces/security/keymint/aidl/                       |
| gatekeeper       | 锁屏密码/生物识别 gatekeeper 认证支持                      | hardware/interfaces/gatekeeper/aidl/                             |
| drm              | 数字版权管理（DRM），密钥协商、内容保护                    | hardware/interfaces/drm/aidl/                                    |
| automotive       | 车载信息娱乐、CAN 总线、仪表盘等车辆相关控制               | hardware/interfaces/automotive/                                  |
| graphics_mapper  | GraphicBuffer Mapper，图形内存映射接口                      | hardware/interfaces/graphics/mapper/aidl/                        |
| media            | 多媒体硬件加速（视频编解码、音频处理、Camera ISP）         | hardware/interfaces/media/aidl/                                  |
| configstore      | 配置信息存取，提供 SoC/HW 相关参数                         | hardware/interfaces/configstore/aidl/                            |
| display          | 显示输出（Display HAL，屏幕参数、亮度、刷新率等）           | hardware/interfaces/display/aidl/                                |
| input            | 输入设备（键盘、触控板、手写笔等）管理和事件采集           | hardware/interfaces/input/aidl/                                  |
| boot             | 设备启动、bootloader 状态、分区切换                        | hardware/interfaces/boot/aidl/                                   |
| fastboot         | fastboot 模式和接口实现                                    | hardware/interfaces/fastboot/aidl/                               |
| time             | 时间管理、RTC、系统时间设置                                 | hardware/interfaces/time/aidl/                                   |
| secure_element   | SE（安全芯片，NFC/支付/安全存储等）接口                     | hardware/interfaces/secure_element/aidl/                         |
| identity         | 身份认证、证件接口（如 eID、国密、护照等）                  | hardware/interfaces/identity/aidl/                               |
| oemlock          | OEM 锁控制（设备解锁、bootloader 锁等）                     | hardware/interfaces/oemlock/aidl/                                |
| wifi_offload     | Wi-Fi 卸载、低功耗扫描等                                   | hardware/interfaces/wifi/offload/aidl/                           |
| confirmationui   | 安全确认 UI 支持                                           | hardware/interfaces/confirmationui/aidl/                         |
| soundtrigger     | 声音唤醒（如“OK Google”热词检测）                          | hardware/interfaces/soundtrigger/aidl/                           |

### TV HAL 层
| 模块             | 功能描述                                                   | 代码路径                                                          |
|------------------|------------------------------------------------------------|-------------------------------------------------------------------|
| tv_input         | 电视输入源（HDMI、ATV、DTV、AV、Component 等）管理         | hardware/interfaces/tv/input/aidl/                                |
| tv_cec           | HDMI CEC (Consumer Electronics Control) 控制和事件          | hardware/interfaces/tv/cec/aidl/                                  |
| tv_tuner         | 电视调谐器（DVB/ATSC/ISDB）支持，频道扫描、播放             | hardware/interfaces/tv/tuner/aidl/                                |
| tv_audio          | 电视音频输入、解码、音效处理                               | hardware/interfaces/tv/audio/aidl/                                |
| tv_hdmi           | HDMI 输入检测与管理，EDID、热插拔、模式切换                | hardware/interfaces/tv/hdmi/aidl/                                 |
| tv_smartcard      | 电视智能卡（CA 解密、授权、付费电视等）接口                | hardware/interfaces/tv/smartcard/aidl/                            |
| tv_ci             | 条件接收（CAM 卡、Conditional Access）管理                 | hardware/interfaces/tv/ci/aidl/                                   |
| tv_wakeup         | TV 唤醒（遥控器、HDMI CEC 唤醒、定时唤醒等）               | hardware/interfaces/tv/wakeup/aidl/                               |
| tv_input_control  | 电视输入切换、信号状态管理                                | hardware/interfaces/tv/inputcontrol/aidl/                         |
| tv_antenna        | 天线、信号强度、信号质量检测与控制                         | hardware/interfaces/tv/antenna/aidl/                              |
| tv_overlay        | TV 画中画（PIP）、OSD、图层叠加控制                        | hardware/interfaces/tv/overlay/aidl/                              |
| tv_dvr            | 数字录像（DVR，录制电视节目、回放）                        | hardware/interfaces/tv/dvr/aidl/                                  |
| tv_hbbtv          | HbbTV（混合广播宽带电视标准）应用与数据接口                 | hardware/interfaces/tv/hbbtv/aidl/                                |
| tv_boot           | TV 专用开机流程、待机与恢复控制                            | hardware/interfaces/tv/boot/aidl/                                 |
| tv_remote         | 电视遥控器（红外/Bluetooth/语音）事件采集和管理            | hardware/interfaces/tv/remote/aidl/                               |
| tv_hdmi_arc       | HDMI ARC（音频回传通道）/eARC 支持                          | hardware/interfaces/tv/hdmi_arc/aidl/                             |

### ART(Android Runtime) 层
| 模块             | 功能描述                                                   | 代码路径                                  |
|------------------|------------------------------------------------------------|-------------------------------------------|
| runtime          | ART 虚拟机主运行时环境，负责类加载、内存管理、线程调度、异常处理、GC、JIT/AOT 执行 | art/runtime/                             |
| dex2oat          | DEX 到 OAT（本地代码）的 AOT 编译工具                       | art/dex2oat/                              |
| odrefresh        | OAT/DEX 优化与刷新的守护与工具，增量重编译与文件一致性检测   | art/odrefresh/                            |
| oatdump          | OAT 文件结构、内容及本地代码分析与调试工具                  | art/oatdump/                              |
| dalvikvm         | Dalvik 兼容入口（历史兼容层，实际调用 ART runtime）         | art/dalvikvm/                             |
| libart           | ART VM 核心运行时库与平台适配                              | art/libartbase/ <br> art/libartpalette/   |
| libdexfile       | DEX 字节码格式解析、操作与校验                               | art/libdexfile/                           |
| libart-compiler  | ART 编译器核心，字节码到本地代码转换、优化                   | art/compiler/                             |
| libart-disassembler | 字节码与本地指令反汇编分析                               | art/disassembler/                         |
| libartbase       | ART 基础工具、数据结构、日志、调试支持                      | art/libartbase/                           |
| libartpalette    | 平台适配接口，跨架构/OS 抽象层                              | art/libartpalette/                        |
| gc               | 垃圾回收（GC）模块，内存回收算法与调优                      | art/runtime/gc/                           |
| jit              | 即时编译（JIT），运行时热点代码本地化与优化                  | art/runtime/jit/                          |
| interpreter      | 字节码解释器，DEX 指令动态调度执行                          | art/runtime/interpreter/                   |
| imgdiag          | Image 文件分析工具（system image 校验与分析）               | art/imgdiag/                              |
| profile          | 方法/代码块热度分析、profile 数据收集与利用                  | art/profile/                              |
| quick            | 快速方法调用和内联、调用链优化等                            | art/runtime/quick/                        |
| signal_catcher   | 信号捕捉与故障转储（crash、ANR、native 信号管理）           | art/runtime/signal_catcher.cc             |
| monitor          | 对象锁、同步、Monitor 机制实现                              | art/runtime/monitor.cc                    |
| verifier         | DEX 字节码静态校验与安全验证                                | art/runtime/verifier/                     |
| debugger         | Java 调试接口 JDWP/断点/单步执行等                          | art/runtime/debugger/                     |
| trace            | 方法调用/性能追踪与分析支持                                 | art/runtime/trace/                        |
| hidden_api       | 隐藏 API 管控，防止 App 访问系统私有接口                     | art/runtime/hidden_api/                   |
| hprof            | Java 堆内存快照与分析工具（heap profiler）                  | art/runtime/hprof/                        |
| jdwp             | Java 调试线协议实现（JDWP）                                 | art/runtime/jdwp/                         |
| libcore          | Java 标准库与通用 API 实现（集合、IO、网络、XML、加密、ICU 等），为 ART/Java Framework 提供核心类库支持 | libcore/                                 |
| OAT（.oat 文件） | ART 将 DEX 字节码 AOT 编译后的产物，包含本地机器码和元数据，提升启动和执行效率 | art/dex2oat/ <br> art/runtime/oat_file.h <br> art/oatdump/ <br> art/odrefresh/ |
| JNI              | Java 层与 native（C/C++）代码互操作桥梁，实现方法调用、数据转换、线程/对象管理 | art/runtime/jni/ <br> libcore/ojluni/src/main/native/include/jni.h |
| libnativebridge  | Native Bridge 机制实现，不同架构下 native so 的兼容仿真加载，跨 ABI 支持 | art/libnativebridge/                      |
| libnativeloader  | 动态库加载与命名空间隔离机制，管理 so 加载路径、安全隔离与卸载 | art/libnativeloader/                      |

### Android Framework层
| 模块                | 功能描述                                                      | 主要代码路径                                |
|---------------------|---------------------------------------------------------------|---------------------------------------------|
| ActivityManager     | 应用组件生命周期管理、进程调度、任务栈管理、后台管控           | frameworks/base/services/core/java/com/android/server/am/         |
| PackageManager      | APK 安装/卸载、包管理、权限管理、签名校验、分区               | frameworks/base/services/core/java/com/android/server/pm/         |
| WindowManager       | 窗口/层级管理、窗口动画、输入分发、屏幕适配                    | frameworks/base/services/core/java/com/android/server/wm/         |
| InputManager        | 输入事件收集、分发、输入设备（键盘、触控、鼠标、遥控）管理      | frameworks/base/services/core/java/com/android/server/input/ <br> frameworks/base/core/java/android/hardware/input/ |
| DisplayManager      | 屏幕显示设备管理、投屏、分辨率切换、亮度控制                   | frameworks/base/services/core/java/com/android/server/display/    |
| PowerManager        | 电源管理、休眠/唤醒、亮度/省电控制、Wakelock                  | frameworks/base/services/core/java/com/android/server/power/      |
| NotificationManager | 通知管理、消息推送、渠道与权限控制、锁屏与前台通知             | frameworks/base/services/core/java/com/android/server/notification/ <br> frameworks/base/core/java/android/app/NotificationManager.java |
| AlarmManager        | 定时任务调度、闹钟服务                                         | frameworks/base/services/core/java/com/android/server/alarm/      |
| ResourceManager     | 应用与系统资源（布局、图片、字符串、样式、主题）加载与管理     | frameworks/base/core/java/android/content/res/ <br> frameworks/base/libs/androidfw/ <br> frameworks/base/services/core/java/com/android/server/ |
| LocationManager     | 定位服务、位置更新、地理围栏、GPS/网络定位                     | frameworks/base/services/core/java/com/android/server/location/   |
| ConnectivityManager | 网络连接、Wi-Fi/蜂窝/以太网、VPN、代理、网络切换               | frameworks/base/services/core/java/com/android/server/connectivity/|
| TelephonyManager    | 蜂窝网络、通话、短信、SIM 卡、信号强度                         | frameworks/opt/telephony/src/java/com/android/internal/telephony/ |
| WifiManager         | 无线网络连接、Wi-Fi 扫描、热点、状态监听                       | frameworks/opt/net/wifi/service/java/com/android/server/wifi/     |
| BluetoothManager    | 蓝牙连接、设备配对、BLE、音频控制                              | packages/modules/Bluetooth/service/java/com/android/server/bluetooth/ |
| AudioManager        | 音频策略、音量、输出/输入路由、音效                            | frameworks/base/services/core/java/com/android/server/audio/      |
| MediaSessionManager | 多媒体播放会话、媒体控制、通知交互                             | frameworks/base/services/core/java/com/android/server/media/      |
| CameraService       | 摄像头设备管理、拍照、预览、视频采集                           | frameworks/av/services/camera/libcameraservice/                  |
| SensorManager       | 传感器事件收集、数据融合、传感器策略                           | frameworks/base/services/core/java/com/android/server/sensor/     |
| JobSchedulerService | 后台任务调度、任务约束、Doze/省电兼容                         | frameworks/base/services/core/java/com/android/server/job/        |
| SystemUI            | 系统界面（状态栏、导航栏、通知栏、快设面板）                   | frameworks/base/packages/SystemUI/                               |
| PermissionManager   | 权限申请、授权、管理、特殊权限分发                             | frameworks/base/services/core/java/com/android/server/pm/permission/ |
| ContentProvider     | 跨应用数据共享、标准化数据访问接口（数据库、文件、网络等）      | frameworks/base/core/java/android/content/ContentProvider.java <br> frameworks/base/core/java/android/content/ |
| Views               | UI 视图系统，所有控件、布局、动画、事件分发基础                | frameworks/base/core/java/android/view/ <br> frameworks/base/core/java/android/widget/ |
| ClipboardService    | 剪贴板数据管理、读写、权限控制                                 | frameworks/base/services/core/java/com/android/server/clipboard/  |
| StorageManager      | 存储空间管理、分区、OTG 设备、加密、文件系统挂载               | frameworks/base/services/core/java/com/android/server/storage/    |
| MountService        | 存储挂载、卸载、监听、分区管理                                 | frameworks/base/services/core/java/com/android/server/mount/      |
| UsbService          | USB 设备检测、状态管理、MTP/PTP、权限分发                      | frameworks/base/services/usb/java/com/android/server/usb/         |
| PrintService        | 打印设备管理、打印任务、网络打印支持                           | frameworks/base/services/core/java/com/android/server/print/      |
| DevicePolicyManager | 企业设备管理、策略下发、远程锁定/擦除                          | frameworks/base/services/devicepolicy/java/com/android/server/devicepolicy/ |
| WallpaperManager    | 壁纸管理、壁纸设置、动态壁纸                                   | frameworks/base/services/core/java/com/android/server/wallpaper/  |
| AccessibilityManager| 辅助功能（无障碍）、读屏、放大镜、辅助输入                    | frameworks/base/services/core/java/com/android/server/accessibility/|
| BackupManager       | 数据备份与恢复、云备份接口                                     | frameworks/base/services/core/java/com/android/server/backup/     |
| RestrictionsManager | 家长控制、内容限制、应用限制                                  | frameworks/base/services/core/java/com/android/server/restrictions/|
| TrustManager        | 信任设备、解锁策略、设备信任级别                               | frameworks/base/services/core/java/com/android/server/trust/      |
| LockSettingsService | 锁屏设置、密码/指纹/面部识别管理                              | frameworks/base/services/core/java/com/android/server/locksettings/|
| AppOpsManager       | 应用操作权限控制、敏感操作监控                                | frameworks/base/services/core/java/com/android/server/appop/      |
| UsageStatsManager   | 应用使用统计、前后台检测、屏幕时间、限制策略                   | frameworks/base/services/usage/java/com/android/server/usage/     |
| ShortcutsManager    | 快捷方式管理、动态/固定快捷方式接口                           | frameworks/base/services/core/java/com/android/server/shortcuts/  |
| IncidentManager     | 故障报告、系统诊断、异常事件收集                              | frameworks/base/services/core/java/com/android/server/incident/   |
| StatsManager        | 性能统计、事件分析、系统指标采集                              | frameworks/base/services/core/java/com/android/server/stats/      |
| PolicyManager       | 电源/设备/安全策略统一管理接口                                | frameworks/base/services/core/java/com/android/server/policy/     |
| MediaService        | 多媒体会话管理、音视频路由、媒体资源分配与权限                 | frameworks/av/services/mediaresourcemanager/ <br> frameworks/base/services/core/java/com/android/server/media/ |
| MediaCodec          | 多媒体编解码标准接口，硬件加速编解码适配                      | frameworks/base/media/java/android/media/MediaCodec.java <br> frameworks/av/media/libstagefright/ |
| MediaExtractor      | 多媒体封装格式解析与音视频流提取                              | frameworks/base/media/java/android/media/MediaExtractor.java <br> frameworks/av/media/libstagefright/MediaExtractor.cpp |
| OpenMAX AL          | 多媒体硬件抽象标准接口，底层音视频硬件访问                    | frameworks/wilhelm/ <br> frameworks/base/media/jni/              |
。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://lhmax2010.github.io/post/Android%20-dai-ma-jia-gou.html">
<meta property="og:image" content="https://github.githubassets.com/favicons/favicon.svg">
<title>Android 代码架构</title>



</head>
<style>
body{box-sizing: border-box;min-width: 200px;max-width: 900px;margin: 20px auto;padding: 45px;font-size: 16px;font-family: sans-serif;line-height: 1.25;}
#header{display:flex;padding-bottom:8px;border-bottom: 1px solid var(--borderColor-muted, var(--color-border-muted));margin-bottom: 16px;}
#footer {margin-top:64px; text-align: center;font-size: small;}

</style>

<style>
.postTitle{margin: auto 0;font-size:40px;font-weight:bold;}
.title-right{display:flex;margin:auto 0 0 auto;}
.title-right .circle{padding: 14px 16px;margin-right:8px;}
#postBody{border-bottom: 1px solid var(--color-border-default);padding-bottom:36px;}
#postBody hr{height:2px;}
#cmButton{height:48px;margin-top:48px;}
#comments{margin-top:64px;}
.g-emoji{font-size:24px;}
@media (max-width: 600px) {
    body {padding: 8px;}
    .postTitle{font-size:24px;}
}

</style>




<body>
    <div id="header">
<h1 class="postTitle">Android 代码架构</h1>
<div class="title-right">
    <a href="https://lhmax2010.github.io" id="buttonHome" class="btn btn-invisible circle" title="首页">
        <svg class="octicon" width="16" height="16">
            <path id="pathHome" fill-rule="evenodd"></path>
        </svg>
    </a>
    
    <a href="https://github.com/lhmax2010/lhmax2010.github.io/issues/2" target="_blank" class="btn btn-invisible circle" title="Issue">
        <svg class="octicon" width="16" height="16">
            <path id="pathIssue" fill-rule="evenodd"></path>
        </svg>
    </a>
    

    <a class="btn btn-invisible circle" onclick="modeSwitch();" title="切换主题">
        <svg class="octicon" width="16" height="16" >
            <path id="themeSwitch" fill-rule="evenodd"></path>
        </svg>
    </a>

</div>
</div>
    <div id="content">
<div class="markdown-body" id="postBody"><h3>Android 架构</h3>
<p>Refer <a href="https://source.android.com/docs/core/architecture?hl=zh-cn" rel="nofollow">https://source.android.com/docs/core/architecture?hl=zh-cn</a><br>
<a target="_blank" rel="noopener noreferrer" href="https://github.com/user-attachments/assets/d62a8932-05dc-40d3-b406-57c9005daad9"><img src="https://github.com/user-attachments/assets/d62a8932-05dc-40d3-b406-57c9005daad9" alt="Image" style="max-width: 100%;"></a></p>
<h3>代码框架整理</h3>
<h3>Linux Kernel 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>大类</th>
<th>子模块</th>
<th>主要功能</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>GKI 与厂商驱动</td>
<td>GKI 核心</td>
<td>通用内核，简化配置，支撑主线生态</td>
<td>kernel/</td>
</tr>
<tr>
<td>GKI 与厂商驱动</td>
<td>Vendor 驱动</td>
<td>厂商专用硬件驱动，模块化加载</td>
<td>vendor/ 、 hardware/</td>
</tr>
<tr>
<td>GKI 与厂商驱动</td>
<td>KGSL</td>
<td>高通 Adreno GPU 驱动，管理 GPU 资源/功耗/命令</td>
<td>drivers/gpu/msm/kgsl/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>Binder</td>
<td>主 IPC 机制，进程间对象/RPC通信</td>
<td>drivers/android/binder/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>Ashmem</td>
<td>匿名共享内存（高效进程间共享）</td>
<td>drivers/staging/android/ashmem.c</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>Lowmemorykiller</td>
<td>低内存回收（LMK，内核/用户空间）</td>
<td>drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>IOCTL 框架</td>
<td>标准 I/O 控制接口</td>
<td>drivers/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>电源管理</td>
<td>CPU 频率调节、wakelock、休眠唤醒</td>
<td>drivers/cpufreq/ , kernel/power/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>SELinux</td>
<td>强制访问控制，保障系统安全</td>
<td>security/selinux/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>Vendor Modules</td>
<td>各类厂商专用硬件驱动</td>
<td>vendor/ 、 hardware/</td>
</tr>
<tr>
<td>Android专有模块</td>
<td>RIL</td>
<td>无线通信接口</td>
<td>system/rild/</td>
</tr>
<tr>
<td>内存管理</td>
<td>LMK</td>
<td>低内存回收机制（内核/用户空间）</td>
<td>drivers/staging/android/lowmemorykiller.c / system/memory/lmkd/</td>
</tr>
<tr>
<td>内存管理</td>
<td>ZRAM</td>
<td>压缩内存，提升低端设备内存利用</td>
<td>drivers/staging/zram/</td>
</tr>
<tr>
<td>内存管理</td>
<td>Buddy System</td>
<td>物理内存分配与合并</td>
<td>mm/compaction.c</td>
</tr>
<tr>
<td>内存管理</td>
<td>Slab/SLUB 分配器</td>
<td>内核对象缓存池式分配</td>
<td>mm/slab.c , mm/slub.c</td>
</tr>
<tr>
<td>内存管理</td>
<td>ION</td>
<td>多媒体/SoC物理内存分配与共享</td>
<td>drivers/staging/android/ion/</td>
</tr>
<tr>
<td>内存管理</td>
<td>DMA-BUF</td>
<td>跨驱动共享物理内存标准接口</td>
<td>drivers/dma-buf/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>EXT4</td>
<td>默认文件系统，高性能高可靠</td>
<td>fs/ext4/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>F2FS</td>
<td>针对 Flash 优化的文件系统</td>
<td>fs/f2fs/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>加密文件系统</td>
<td>FSCRYPT/LUKS 文件系统加密</td>
<td>fs/crypto/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>Vold</td>
<td>存储管理守护进程，挂载/卸载/OTG管理</td>
<td>system/core/vold/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>DM-Verity</td>
<td>只读分区完整性校验，防篡改</td>
<td>drivers/md/</td>
</tr>
<tr>
<td>文件系统与存储</td>
<td>Keymaster HAL</td>
<td>密钥管理/安全生成功能</td>
<td>hardware/interfaces/security/keymint/aidl/</td>
</tr>
<tr>
<td>网络</td>
<td>TCP/IP 协议栈</td>
<td>IPv4/IPv6/TCP/UDP 网络通信</td>
<td>net/ipv4/ , net/ipv6/</td>
</tr>
<tr>
<td>网络</td>
<td>Wi-Fi 驱动</td>
<td>无线网卡、Wi-Fi 管理</td>
<td>drivers/net/wireless/</td>
</tr>
<tr>
<td>网络</td>
<td>蓝牙驱动</td>
<td>蓝牙协议栈驱动</td>
<td>drivers/bluetooth/</td>
</tr>
<tr>
<td>网络</td>
<td>Netfilter</td>
<td>防火墙/NAT/数据包过滤</td>
<td>net/netfilter/</td>
</tr>
<tr>
<td>安全性</td>
<td>SELinux</td>
<td>强制访问控制</td>
<td>security/selinux/</td>
</tr>
<tr>
<td>安全性</td>
<td>HSM</td>
<td>硬件安全模块，加密运算加速</td>
<td>drivers/crypto/</td>
</tr>
<tr>
<td>安全性</td>
<td>AppArmor（可选）</td>
<td>可选安全沙箱策略</td>
<td>security/apparmor/</td>
</tr>
<tr>
<td>中断/硬件管理</td>
<td>中断管理</td>
<td>硬件/软件中断分发和处理</td>
<td>kernel/irq/</td>
</tr>
<tr>
<td>中断/硬件管理</td>
<td>GPU 驱动</td>
<td>Adreno/Mali 等 GPU 内核驱动</td>
<td>drivers/gpu/ , drivers/gpu/msm/kgsl/</td>
</tr>
<tr>
<td>中断/硬件管理</td>
<td>传感器驱动</td>
<td>各类传感器（加速度计、陀螺仪等）</td>
<td>drivers/iio/</td>
</tr>
<tr>
<td>中断/硬件管理</td>
<td>输入设备驱动</td>
<td>触摸屏、键盘等输入设备</td>
<td>drivers/input/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>Native Libraries 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>类别</th>
<th>名称</th>
<th>主要功能</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>基础库</td>
<td>Bionic libc</td>
<td>C 标准库，系统调用、内存分配</td>
<td>bionic/</td>
</tr>
<tr>
<td>基础库</td>
<td>libc++</td>
<td>C++ 标准库</td>
<td>external/libcxx/</td>
</tr>
<tr>
<td>基础库</td>
<td>libm</td>
<td>数学函数库</td>
<td>bionic/libm/</td>
</tr>
<tr>
<td>系统基础</td>
<td>liblog</td>
<td>日志接口</td>
<td>system/core/liblog/</td>
</tr>
<tr>
<td>系统基础</td>
<td>libbinder</td>
<td>Binder IPC 支持</td>
<td>frameworks/native/libs/binder/</td>
</tr>
<tr>
<td>系统基础</td>
<td>libutils</td>
<td>字符串、Mutex、引用计数等工具</td>
<td>system/core/libutils/</td>
</tr>
<tr>
<td>系统基础</td>
<td>libandroid</td>
<td>Native 和 Java 桥接接口</td>
<td>frameworks/native/libs/android/</td>
</tr>
<tr>
<td>系统基础</td>
<td>libnativehelper</td>
<td>JNI 辅助库</td>
<td>frameworks/native/libs/nativehelper/</td>
</tr>
<tr>
<td>安全</td>
<td>libselinux</td>
<td>SELinux 支持库</td>
<td>external/selinux/libselinux/</td>
</tr>
<tr>
<td>安全</td>
<td>libcrypto</td>
<td>加密算法库</td>
<td>external/openssl/</td>
</tr>
<tr>
<td>安全</td>
<td>libssl</td>
<td>SSL/TLS 支持</td>
<td>external/openssl/</td>
</tr>
<tr>
<td>算法/压缩</td>
<td>libz</td>
<td>压缩算法库（zlib）</td>
<td>external/zlib/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libjpeg</td>
<td>JPEG 图像解码</td>
<td>external/libjpeg-turbo/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libpng</td>
<td>PNG 图像解码</td>
<td>external/libpng/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libwebp</td>
<td>WebP 图像处理</td>
<td>external/libwebp/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libskia</td>
<td>2D 图形渲染</td>
<td>external/skia/</td>
</tr>
<tr>
<td>图形</td>
<td>libEGL/libGLES</td>
<td>OpenGL ES 支持</td>
<td>frameworks/native/opengl/</td>
</tr>
<tr>
<td>图形</td>
<td>libvulkan</td>
<td>Vulkan 支持</td>
<td>external/vulkan/</td>
</tr>
<tr>
<td>摄像头</td>
<td>libcamera</td>
<td>摄像头 HAL 通用库</td>
<td>external/libcamera/</td>
</tr>
<tr>
<td>输入</td>
<td>libinput</td>
<td>输入设备支持</td>
<td>system/core/libinput/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libstagefright</td>
<td>多媒体编解码</td>
<td>frameworks/av/media/libstagefright/</td>
</tr>
<tr>
<td>多媒体</td>
<td>libmediandk</td>
<td>多媒体原生接口</td>
<td>frameworks/av/media/ndk/</td>
</tr>
<tr>
<td>序列化</td>
<td>libprotobuf</td>
<td>Protocol Buffers 序列化库</td>
<td>external/protobuf/</td>
</tr>
<tr>
<td>ART</td>
<td>libdexfile</td>
<td>DEX 字节码解析与支持</td>
<td>art/libdexfile/</td>
</tr>
<tr>
<td>ART</td>
<td>libart</td>
<td>ART 虚拟机核心库</td>
<td>art/runtime/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>Native Deamons 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>类别</th>
<th>名称</th>
<th>主要功能</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>启动/管理</td>
<td>init</td>
<td>系统启动初始化，启动守护进程</td>
<td>system/core/init/</td>
</tr>
<tr>
<td>调试</td>
<td>adbd</td>
<td>ADB 调试守护进程</td>
<td>system/core/adb/</td>
</tr>
<tr>
<td>存储</td>
<td>vold</td>
<td>存储设备管理（挂载、加密、OTG等）</td>
<td>system/vold/</td>
</tr>
<tr>
<td>网络</td>
<td>netd</td>
<td>网络配置、DNS、防火墙等</td>
<td>system/netd/</td>
</tr>
<tr>
<td>日志</td>
<td>logd</td>
<td>系统日志服务</td>
<td>system/core/logd/</td>
</tr>
<tr>
<td>管理</td>
<td>servicemanager</td>
<td>Binder 服务管理器</td>
<td>frameworks/native/cmds/servicemanager/</td>
</tr>
<tr>
<td>应用孵化</td>
<td>zygote</td>
<td>应用进程孵化器，启动 Java 应用</td>
<td>frameworks/base/cmds/zygote/</td>
</tr>
<tr>
<td>图形</td>
<td>surfaceflinger</td>
<td>图形合成服务，负责屏幕显示</td>
<td>frameworks/native/services/surfaceflinger/</td>
</tr>
<tr>
<td>内存</td>
<td>lmkd</td>
<td>Low Memory Killer Daemon 内存回收守护进程</td>
<td>system/memory/lmkd/</td>
</tr>
<tr>
<td>无线</td>
<td>rild</td>
<td>无线通信守护进程（Radio Interface Layer）</td>
<td>hardware/ril/</td>
</tr>
<tr>
<td>电池</td>
<td>healthd</td>
<td>电池和健康状态监控</td>
<td>system/core/healthd/</td>
</tr>
<tr>
<td>安全</td>
<td>keystore</td>
<td>密钥/证书安全管理</td>
<td>system/security/keystore/</td>
</tr>
<tr>
<td>安装</td>
<td>installd</td>
<td>APK 安装、数据目录管理</td>
<td>system/extras/installd/</td>
</tr>
<tr>
<td>DRM</td>
<td>drmserver</td>
<td>数字版权管理（DRM）服务</td>
<td>frameworks/av/drm/drmserver/</td>
</tr>
<tr>
<td>安全</td>
<td>gatekeeperd</td>
<td>屏幕解锁验证（Gatekeeper HAL）</td>
<td>system/gatekeeperd/</td>
</tr>
<tr>
<td>统计</td>
<td>statsd</td>
<td>统计与遥测收集服务</td>
<td>frameworks/base/cmds/statsd/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>HAL(Harware Abstraction Layer) 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>模块</th>
<th>功能描述</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>audio</td>
<td>音频采集、播放、处理和音频硬件控制</td>
<td>hardware/interfaces/audio/aidl/</td>
</tr>
<tr>
<td>camera</td>
<td>摄像头操作、采集、拍照、视频录制、参数调节</td>
<td>hardware/interfaces/camera/aidl/</td>
</tr>
<tr>
<td>graphics</td>
<td>显示合成（HWC）、图形 buffer 分配、显示刷新</td>
<td>hardware/interfaces/graphics/composer/aidl/ <br> hardware/interfaces/graphics/allocator/aidl/</td>
</tr>
<tr>
<td>light</td>
<td>屏幕、键盘、通知 LED 灯光控制</td>
<td>hardware/interfaces/light/aidl/</td>
</tr>
<tr>
<td>vibrator</td>
<td>振动器控制（马达驱动、震感反馈）</td>
<td>hardware/interfaces/vibrator/aidl/</td>
</tr>
<tr>
<td>sensors</td>
<td>各类传感器（加速度、陀螺仪、磁力、环境、计步等）</td>
<td>hardware/interfaces/sensors/aidl/</td>
</tr>
<tr>
<td>biometrics</td>
<td>指纹、人脸、虹膜等生物识别接口</td>
<td>hardware/interfaces/biometrics/fingerprint/aidl/ <br> hardware/interfaces/biometrics/face/aidl/</td>
</tr>
<tr>
<td>bluetooth</td>
<td>蓝牙功能（扫描、配对、音频、BLE等）</td>
<td>hardware/interfaces/bluetooth/aidl/</td>
</tr>
<tr>
<td>wifi</td>
<td>无线网络（Wi-Fi）配置、扫描、连接、热点</td>
<td>hardware/interfaces/wifi/aidl/</td>
</tr>
<tr>
<td>gnss</td>
<td>卫星定位（GPS、GLONASS、北斗、Galileo）</td>
<td>hardware/interfaces/gnss/aidl/</td>
</tr>
<tr>
<td>radio</td>
<td>无线通信（蜂窝基带，电话、短信、数据、SIM等）</td>
<td>hardware/interfaces/radio/aidl/</td>
</tr>
<tr>
<td>nfc</td>
<td>近场通信（NFC）</td>
<td>hardware/interfaces/nfc/aidl/</td>
</tr>
<tr>
<td>usb</td>
<td>USB 设备检测、模式切换、充电控制</td>
<td>hardware/interfaces/usb/aidl/</td>
</tr>
<tr>
<td>thermal</td>
<td>芯片、CPU/GPU/电池等温度采集与管理</td>
<td>hardware/interfaces/thermal/aidl/</td>
</tr>
<tr>
<td>health</td>
<td>电池健康、电量、温度、电池状态采集与上报</td>
<td>hardware/interfaces/health/aidl/</td>
</tr>
<tr>
<td>power</td>
<td>电源管理（省电模式、唤醒、休眠、boost等）</td>
<td>hardware/interfaces/power/aidl/</td>
</tr>
<tr>
<td>keymaster</td>
<td>密钥/加密硬件支持（安全密钥生成、签名、硬件安全区）</td>
<td>hardware/interfaces/security/keymint/aidl/</td>
</tr>
<tr>
<td>gatekeeper</td>
<td>锁屏密码/生物识别 gatekeeper 认证支持</td>
<td>hardware/interfaces/gatekeeper/aidl/</td>
</tr>
<tr>
<td>drm</td>
<td>数字版权管理（DRM），密钥协商、内容保护</td>
<td>hardware/interfaces/drm/aidl/</td>
</tr>
<tr>
<td>automotive</td>
<td>车载信息娱乐、CAN 总线、仪表盘等车辆相关控制</td>
<td>hardware/interfaces/automotive/</td>
</tr>
<tr>
<td>graphics_mapper</td>
<td>GraphicBuffer Mapper，图形内存映射接口</td>
<td>hardware/interfaces/graphics/mapper/aidl/</td>
</tr>
<tr>
<td>media</td>
<td>多媒体硬件加速（视频编解码、音频处理、Camera ISP）</td>
<td>hardware/interfaces/media/aidl/</td>
</tr>
<tr>
<td>configstore</td>
<td>配置信息存取，提供 SoC/HW 相关参数</td>
<td>hardware/interfaces/configstore/aidl/</td>
</tr>
<tr>
<td>display</td>
<td>显示输出（Display HAL，屏幕参数、亮度、刷新率等）</td>
<td>hardware/interfaces/display/aidl/</td>
</tr>
<tr>
<td>input</td>
<td>输入设备（键盘、触控板、手写笔等）管理和事件采集</td>
<td>hardware/interfaces/input/aidl/</td>
</tr>
<tr>
<td>boot</td>
<td>设备启动、bootloader 状态、分区切换</td>
<td>hardware/interfaces/boot/aidl/</td>
</tr>
<tr>
<td>fastboot</td>
<td>fastboot 模式和接口实现</td>
<td>hardware/interfaces/fastboot/aidl/</td>
</tr>
<tr>
<td>time</td>
<td>时间管理、RTC、系统时间设置</td>
<td>hardware/interfaces/time/aidl/</td>
</tr>
<tr>
<td>secure_element</td>
<td>SE（安全芯片，NFC/支付/安全存储等）接口</td>
<td>hardware/interfaces/secure_element/aidl/</td>
</tr>
<tr>
<td>identity</td>
<td>身份认证、证件接口（如 eID、国密、护照等）</td>
<td>hardware/interfaces/identity/aidl/</td>
</tr>
<tr>
<td>oemlock</td>
<td>OEM 锁控制（设备解锁、bootloader 锁等）</td>
<td>hardware/interfaces/oemlock/aidl/</td>
</tr>
<tr>
<td>wifi_offload</td>
<td>Wi-Fi 卸载、低功耗扫描等</td>
<td>hardware/interfaces/wifi/offload/aidl/</td>
</tr>
<tr>
<td>confirmationui</td>
<td>安全确认 UI 支持</td>
<td>hardware/interfaces/confirmationui/aidl/</td>
</tr>
<tr>
<td>soundtrigger</td>
<td>声音唤醒（如“OK Google”热词检测）</td>
<td>hardware/interfaces/soundtrigger/aidl/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>TV HAL 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>模块</th>
<th>功能描述</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>tv_input</td>
<td>电视输入源（HDMI、ATV、DTV、AV、Component 等）管理</td>
<td>hardware/interfaces/tv/input/aidl/</td>
</tr>
<tr>
<td>tv_cec</td>
<td>HDMI CEC (Consumer Electronics Control) 控制和事件</td>
<td>hardware/interfaces/tv/cec/aidl/</td>
</tr>
<tr>
<td>tv_tuner</td>
<td>电视调谐器（DVB/ATSC/ISDB）支持，频道扫描、播放</td>
<td>hardware/interfaces/tv/tuner/aidl/</td>
</tr>
<tr>
<td>tv_audio</td>
<td>电视音频输入、解码、音效处理</td>
<td>hardware/interfaces/tv/audio/aidl/</td>
</tr>
<tr>
<td>tv_hdmi</td>
<td>HDMI 输入检测与管理，EDID、热插拔、模式切换</td>
<td>hardware/interfaces/tv/hdmi/aidl/</td>
</tr>
<tr>
<td>tv_smartcard</td>
<td>电视智能卡（CA 解密、授权、付费电视等）接口</td>
<td>hardware/interfaces/tv/smartcard/aidl/</td>
</tr>
<tr>
<td>tv_ci</td>
<td>条件接收（CAM 卡、Conditional Access）管理</td>
<td>hardware/interfaces/tv/ci/aidl/</td>
</tr>
<tr>
<td>tv_wakeup</td>
<td>TV 唤醒（遥控器、HDMI CEC 唤醒、定时唤醒等）</td>
<td>hardware/interfaces/tv/wakeup/aidl/</td>
</tr>
<tr>
<td>tv_input_control</td>
<td>电视输入切换、信号状态管理</td>
<td>hardware/interfaces/tv/inputcontrol/aidl/</td>
</tr>
<tr>
<td>tv_antenna</td>
<td>天线、信号强度、信号质量检测与控制</td>
<td>hardware/interfaces/tv/antenna/aidl/</td>
</tr>
<tr>
<td>tv_overlay</td>
<td>TV 画中画（PIP）、OSD、图层叠加控制</td>
<td>hardware/interfaces/tv/overlay/aidl/</td>
</tr>
<tr>
<td>tv_dvr</td>
<td>数字录像（DVR，录制电视节目、回放）</td>
<td>hardware/interfaces/tv/dvr/aidl/</td>
</tr>
<tr>
<td>tv_hbbtv</td>
<td>HbbTV（混合广播宽带电视标准）应用与数据接口</td>
<td>hardware/interfaces/tv/hbbtv/aidl/</td>
</tr>
<tr>
<td>tv_boot</td>
<td>TV 专用开机流程、待机与恢复控制</td>
<td>hardware/interfaces/tv/boot/aidl/</td>
</tr>
<tr>
<td>tv_remote</td>
<td>电视遥控器（红外/Bluetooth/语音）事件采集和管理</td>
<td>hardware/interfaces/tv/remote/aidl/</td>
</tr>
<tr>
<td>tv_hdmi_arc</td>
<td>HDMI ARC（音频回传通道）/eARC 支持</td>
<td>hardware/interfaces/tv/hdmi_arc/aidl/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>ART(Android Runtime) 层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>模块</th>
<th>功能描述</th>
<th>代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>runtime</td>
<td>ART 虚拟机主运行时环境，负责类加载、内存管理、线程调度、异常处理、GC、JIT/AOT 执行</td>
<td>art/runtime/</td>
</tr>
<tr>
<td>dex2oat</td>
<td>DEX 到 OAT（本地代码）的 AOT 编译工具</td>
<td>art/dex2oat/</td>
</tr>
<tr>
<td>odrefresh</td>
<td>OAT/DEX 优化与刷新的守护与工具，增量重编译与文件一致性检测</td>
<td>art/odrefresh/</td>
</tr>
<tr>
<td>oatdump</td>
<td>OAT 文件结构、内容及本地代码分析与调试工具</td>
<td>art/oatdump/</td>
</tr>
<tr>
<td>dalvikvm</td>
<td>Dalvik 兼容入口（历史兼容层，实际调用 ART runtime）</td>
<td>art/dalvikvm/</td>
</tr>
<tr>
<td>libart</td>
<td>ART VM 核心运行时库与平台适配</td>
<td>art/libartbase/ <br> art/libartpalette/</td>
</tr>
<tr>
<td>libdexfile</td>
<td>DEX 字节码格式解析、操作与校验</td>
<td>art/libdexfile/</td>
</tr>
<tr>
<td>libart-compiler</td>
<td>ART 编译器核心，字节码到本地代码转换、优化</td>
<td>art/compiler/</td>
</tr>
<tr>
<td>libart-disassembler</td>
<td>字节码与本地指令反汇编分析</td>
<td>art/disassembler/</td>
</tr>
<tr>
<td>libartbase</td>
<td>ART 基础工具、数据结构、日志、调试支持</td>
<td>art/libartbase/</td>
</tr>
<tr>
<td>libartpalette</td>
<td>平台适配接口，跨架构/OS 抽象层</td>
<td>art/libartpalette/</td>
</tr>
<tr>
<td>gc</td>
<td>垃圾回收（GC）模块，内存回收算法与调优</td>
<td>art/runtime/gc/</td>
</tr>
<tr>
<td>jit</td>
<td>即时编译（JIT），运行时热点代码本地化与优化</td>
<td>art/runtime/jit/</td>
</tr>
<tr>
<td>interpreter</td>
<td>字节码解释器，DEX 指令动态调度执行</td>
<td>art/runtime/interpreter/</td>
</tr>
<tr>
<td>imgdiag</td>
<td>Image 文件分析工具（system image 校验与分析）</td>
<td>art/imgdiag/</td>
</tr>
<tr>
<td>profile</td>
<td>方法/代码块热度分析、profile 数据收集与利用</td>
<td>art/profile/</td>
</tr>
<tr>
<td>quick</td>
<td>快速方法调用和内联、调用链优化等</td>
<td>art/runtime/quick/</td>
</tr>
<tr>
<td>signal_catcher</td>
<td>信号捕捉与故障转储（crash、ANR、native 信号管理）</td>
<td>art/runtime/signal_catcher.cc</td>
</tr>
<tr>
<td>monitor</td>
<td>对象锁、同步、Monitor 机制实现</td>
<td>art/runtime/monitor.cc</td>
</tr>
<tr>
<td>verifier</td>
<td>DEX 字节码静态校验与安全验证</td>
<td>art/runtime/verifier/</td>
</tr>
<tr>
<td>debugger</td>
<td>Java 调试接口 JDWP/断点/单步执行等</td>
<td>art/runtime/debugger/</td>
</tr>
<tr>
<td>trace</td>
<td>方法调用/性能追踪与分析支持</td>
<td>art/runtime/trace/</td>
</tr>
<tr>
<td>hidden_api</td>
<td>隐藏 API 管控，防止 App 访问系统私有接口</td>
<td>art/runtime/hidden_api/</td>
</tr>
<tr>
<td>hprof</td>
<td>Java 堆内存快照与分析工具（heap profiler）</td>
<td>art/runtime/hprof/</td>
</tr>
<tr>
<td>jdwp</td>
<td>Java 调试线协议实现（JDWP）</td>
<td>art/runtime/jdwp/</td>
</tr>
<tr>
<td>libcore</td>
<td>Java 标准库与通用 API 实现（集合、IO、网络、XML、加密、ICU 等），为 ART/Java Framework 提供核心类库支持</td>
<td>libcore/</td>
</tr>
<tr>
<td>OAT（.oat 文件）</td>
<td>ART 将 DEX 字节码 AOT 编译后的产物，包含本地机器码和元数据，提升启动和执行效率</td>
<td>art/dex2oat/ <br> art/runtime/oat_file.h <br> art/oatdump/ <br> art/odrefresh/</td>
</tr>
<tr>
<td>JNI</td>
<td>Java 层与 native（C/C++）代码互操作桥梁，实现方法调用、数据转换、线程/对象管理</td>
<td>art/runtime/jni/ <br> libcore/ojluni/src/main/native/include/jni.h</td>
</tr>
<tr>
<td>libnativebridge</td>
<td>Native Bridge 机制实现，不同架构下 native so 的兼容仿真加载，跨 ABI 支持</td>
<td>art/libnativebridge/</td>
</tr>
<tr>
<td>libnativeloader</td>
<td>动态库加载与命名空间隔离机制，管理 so 加载路径、安全隔离与卸载</td>
<td>art/libnativeloader/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table>
<h3>Android Framework层</h3>
<markdown-accessiblity-table><table role="table">
<thead>
<tr>
<th>模块</th>
<th>功能描述</th>
<th>主要代码路径</th>
</tr>
</thead>
<tbody>
<tr>
<td>ActivityManager</td>
<td>应用组件生命周期管理、进程调度、任务栈管理、后台管控</td>
<td>frameworks/base/services/core/java/com/android/server/am/</td>
</tr>
<tr>
<td>PackageManager</td>
<td>APK 安装/卸载、包管理、权限管理、签名校验、分区</td>
<td>frameworks/base/services/core/java/com/android/server/pm/</td>
</tr>
<tr>
<td>WindowManager</td>
<td>窗口/层级管理、窗口动画、输入分发、屏幕适配</td>
<td>frameworks/base/services/core/java/com/android/server/wm/</td>
</tr>
<tr>
<td>InputManager</td>
<td>输入事件收集、分发、输入设备（键盘、触控、鼠标、遥控）管理</td>
<td>frameworks/base/services/core/java/com/android/server/input/ <br> frameworks/base/core/java/android/hardware/input/</td>
</tr>
<tr>
<td>DisplayManager</td>
<td>屏幕显示设备管理、投屏、分辨率切换、亮度控制</td>
<td>frameworks/base/services/core/java/com/android/server/display/</td>
</tr>
<tr>
<td>PowerManager</td>
<td>电源管理、休眠/唤醒、亮度/省电控制、Wakelock</td>
<td>frameworks/base/services/core/java/com/android/server/power/</td>
</tr>
<tr>
<td>NotificationManager</td>
<td>通知管理、消息推送、渠道与权限控制、锁屏与前台通知</td>
<td>frameworks/base/services/core/java/com/android/server/notification/ <br> frameworks/base/core/java/android/app/NotificationManager.java</td>
</tr>
<tr>
<td>AlarmManager</td>
<td>定时任务调度、闹钟服务</td>
<td>frameworks/base/services/core/java/com/android/server/alarm/</td>
</tr>
<tr>
<td>ResourceManager</td>
<td>应用与系统资源（布局、图片、字符串、样式、主题）加载与管理</td>
<td>frameworks/base/core/java/android/content/res/ <br> frameworks/base/libs/androidfw/ <br> frameworks/base/services/core/java/com/android/server/</td>
</tr>
<tr>
<td>LocationManager</td>
<td>定位服务、位置更新、地理围栏、GPS/网络定位</td>
<td>frameworks/base/services/core/java/com/android/server/location/</td>
</tr>
<tr>
<td>ConnectivityManager</td>
<td>网络连接、Wi-Fi/蜂窝/以太网、VPN、代理、网络切换</td>
<td>frameworks/base/services/core/java/com/android/server/connectivity/</td>
</tr>
<tr>
<td>TelephonyManager</td>
<td>蜂窝网络、通话、短信、SIM 卡、信号强度</td>
<td>frameworks/opt/telephony/src/java/com/android/internal/telephony/</td>
</tr>
<tr>
<td>WifiManager</td>
<td>无线网络连接、Wi-Fi 扫描、热点、状态监听</td>
<td>frameworks/opt/net/wifi/service/java/com/android/server/wifi/</td>
</tr>
<tr>
<td>BluetoothManager</td>
<td>蓝牙连接、设备配对、BLE、音频控制</td>
<td>packages/modules/Bluetooth/service/java/com/android/server/bluetooth/</td>
</tr>
<tr>
<td>AudioManager</td>
<td>音频策略、音量、输出/输入路由、音效</td>
<td>frameworks/base/services/core/java/com/android/server/audio/</td>
</tr>
<tr>
<td>MediaSessionManager</td>
<td>多媒体播放会话、媒体控制、通知交互</td>
<td>frameworks/base/services/core/java/com/android/server/media/</td>
</tr>
<tr>
<td>CameraService</td>
<td>摄像头设备管理、拍照、预览、视频采集</td>
<td>frameworks/av/services/camera/libcameraservice/</td>
</tr>
<tr>
<td>SensorManager</td>
<td>传感器事件收集、数据融合、传感器策略</td>
<td>frameworks/base/services/core/java/com/android/server/sensor/</td>
</tr>
<tr>
<td>JobSchedulerService</td>
<td>后台任务调度、任务约束、Doze/省电兼容</td>
<td>frameworks/base/services/core/java/com/android/server/job/</td>
</tr>
<tr>
<td>SystemUI</td>
<td>系统界面（状态栏、导航栏、通知栏、快设面板）</td>
<td>frameworks/base/packages/SystemUI/</td>
</tr>
<tr>
<td>PermissionManager</td>
<td>权限申请、授权、管理、特殊权限分发</td>
<td>frameworks/base/services/core/java/com/android/server/pm/permission/</td>
</tr>
<tr>
<td>ContentProvider</td>
<td>跨应用数据共享、标准化数据访问接口（数据库、文件、网络等）</td>
<td>frameworks/base/core/java/android/content/ContentProvider.java <br> frameworks/base/core/java/android/content/</td>
</tr>
<tr>
<td>Views</td>
<td>UI 视图系统，所有控件、布局、动画、事件分发基础</td>
<td>frameworks/base/core/java/android/view/ <br> frameworks/base/core/java/android/widget/</td>
</tr>
<tr>
<td>ClipboardService</td>
<td>剪贴板数据管理、读写、权限控制</td>
<td>frameworks/base/services/core/java/com/android/server/clipboard/</td>
</tr>
<tr>
<td>StorageManager</td>
<td>存储空间管理、分区、OTG 设备、加密、文件系统挂载</td>
<td>frameworks/base/services/core/java/com/android/server/storage/</td>
</tr>
<tr>
<td>MountService</td>
<td>存储挂载、卸载、监听、分区管理</td>
<td>frameworks/base/services/core/java/com/android/server/mount/</td>
</tr>
<tr>
<td>UsbService</td>
<td>USB 设备检测、状态管理、MTP/PTP、权限分发</td>
<td>frameworks/base/services/usb/java/com/android/server/usb/</td>
</tr>
<tr>
<td>PrintService</td>
<td>打印设备管理、打印任务、网络打印支持</td>
<td>frameworks/base/services/core/java/com/android/server/print/</td>
</tr>
<tr>
<td>DevicePolicyManager</td>
<td>企业设备管理、策略下发、远程锁定/擦除</td>
<td>frameworks/base/services/devicepolicy/java/com/android/server/devicepolicy/</td>
</tr>
<tr>
<td>WallpaperManager</td>
<td>壁纸管理、壁纸设置、动态壁纸</td>
<td>frameworks/base/services/core/java/com/android/server/wallpaper/</td>
</tr>
<tr>
<td>AccessibilityManager</td>
<td>辅助功能（无障碍）、读屏、放大镜、辅助输入</td>
<td>frameworks/base/services/core/java/com/android/server/accessibility/</td>
</tr>
<tr>
<td>BackupManager</td>
<td>数据备份与恢复、云备份接口</td>
<td>frameworks/base/services/core/java/com/android/server/backup/</td>
</tr>
<tr>
<td>RestrictionsManager</td>
<td>家长控制、内容限制、应用限制</td>
<td>frameworks/base/services/core/java/com/android/server/restrictions/</td>
</tr>
<tr>
<td>TrustManager</td>
<td>信任设备、解锁策略、设备信任级别</td>
<td>frameworks/base/services/core/java/com/android/server/trust/</td>
</tr>
<tr>
<td>LockSettingsService</td>
<td>锁屏设置、密码/指纹/面部识别管理</td>
<td>frameworks/base/services/core/java/com/android/server/locksettings/</td>
</tr>
<tr>
<td>AppOpsManager</td>
<td>应用操作权限控制、敏感操作监控</td>
<td>frameworks/base/services/core/java/com/android/server/appop/</td>
</tr>
<tr>
<td>UsageStatsManager</td>
<td>应用使用统计、前后台检测、屏幕时间、限制策略</td>
<td>frameworks/base/services/usage/java/com/android/server/usage/</td>
</tr>
<tr>
<td>ShortcutsManager</td>
<td>快捷方式管理、动态/固定快捷方式接口</td>
<td>frameworks/base/services/core/java/com/android/server/shortcuts/</td>
</tr>
<tr>
<td>IncidentManager</td>
<td>故障报告、系统诊断、异常事件收集</td>
<td>frameworks/base/services/core/java/com/android/server/incident/</td>
</tr>
<tr>
<td>StatsManager</td>
<td>性能统计、事件分析、系统指标采集</td>
<td>frameworks/base/services/core/java/com/android/server/stats/</td>
</tr>
<tr>
<td>PolicyManager</td>
<td>电源/设备/安全策略统一管理接口</td>
<td>frameworks/base/services/core/java/com/android/server/policy/</td>
</tr>
<tr>
<td>MediaService</td>
<td>多媒体会话管理、音视频路由、媒体资源分配与权限</td>
<td>frameworks/av/services/mediaresourcemanager/ <br> frameworks/base/services/core/java/com/android/server/media/</td>
</tr>
<tr>
<td>MediaCodec</td>
<td>多媒体编解码标准接口，硬件加速编解码适配</td>
<td>frameworks/base/media/java/android/media/MediaCodec.java <br> frameworks/av/media/libstagefright/</td>
</tr>
<tr>
<td>MediaExtractor</td>
<td>多媒体封装格式解析与音视频流提取</td>
<td>frameworks/base/media/java/android/media/MediaExtractor.java <br> frameworks/av/media/libstagefright/MediaExtractor.cpp</td>
</tr>
<tr>
<td>OpenMAX AL</td>
<td>多媒体硬件抽象标准接口，底层音视频硬件访问</td>
<td>frameworks/wilhelm/ <br> frameworks/base/media/jni/</td>
</tr>
</tbody>
</table></markdown-accessiblity-table></div>
<div style="font-size:small;margin-top:8px;float:right;"></div>

<button class="btn btn-block" type="button" onclick="openComments()" id="cmButton">评论</button>
<div class="comments" id="comments"></div>

</div>
    <div id="footer"><div id="footer1">Copyright © <span id="copyrightYear"></span> <a href="https://lhmax2010.github.io">Blog Title</a></div>
<div id="footer2">
    <span id="runday"></span><span>Powered by <a href="https://meekdai.com/Gmeek.html" target="_blank">Gmeek</a></span>
</div>

<script>
var now=new Date();
document.getElementById("copyrightYear").innerHTML=now.getFullYear();

if(""!=""){
    var startSite=new Date("");
    var diff=now.getTime()-startSite.getTime();
    var diffDay=Math.floor(diff/(1000*60*60*24));
    document.getElementById("runday").innerHTML="网站运行"+diffDay+"天"+" • ";
}
</script></div>
</body>
<script>
var IconList={'sun': 'M8 10.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0V.75A.75.75 0 018 0zm0 13a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 018 13zM2.343 2.343a.75.75 0 011.061 0l1.06 1.061a.75.75 0 01-1.06 1.06l-1.06-1.06a.75.75 0 010-1.06zm9.193 9.193a.75.75 0 011.06 0l1.061 1.06a.75.75 0 01-1.06 1.061l-1.061-1.06a.75.75 0 010-1.061zM16 8a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5A.75.75 0 0116 8zM3 8a.75.75 0 01-.75.75H.75a.75.75 0 010-1.5h1.5A.75.75 0 013 8zm10.657-5.657a.75.75 0 010 1.061l-1.061 1.06a.75.75 0 11-1.06-1.06l1.06-1.06a.75.75 0 011.06 0zm-9.193 9.193a.75.75 0 010 1.06l-1.06 1.061a.75.75 0 11-1.061-1.06l1.06-1.061a.75.75 0 011.061 0z', 'moon': 'M9.598 1.591a.75.75 0 01.785-.175 7 7 0 11-8.967 8.967.75.75 0 01.961-.96 5.5 5.5 0 007.046-7.046.75.75 0 01.175-.786zm1.616 1.945a7 7 0 01-7.678 7.678 5.5 5.5 0 107.678-7.678z', 'sync': 'M1.705 8.005a.75.75 0 0 1 .834.656 5.5 5.5 0 0 0 9.592 2.97l-1.204-1.204a.25.25 0 0 1 .177-.427h3.646a.25.25 0 0 1 .25.25v3.646a.25.25 0 0 1-.427.177l-1.38-1.38A7.002 7.002 0 0 1 1.05 8.84a.75.75 0 0 1 .656-.834ZM8 2.5a5.487 5.487 0 0 0-4.131 1.869l1.204 1.204A.25.25 0 0 1 4.896 6H1.25A.25.25 0 0 1 1 5.75V2.104a.25.25 0 0 1 .427-.177l1.38 1.38A7.002 7.002 0 0 1 14.95 7.16a.75.75 0 0 1-1.49.178A5.5 5.5 0 0 0 8 2.5Z', 'home': 'M6.906.664a1.749 1.749 0 0 1 2.187 0l5.25 4.2c.415.332.657.835.657 1.367v7.019A1.75 1.75 0 0 1 13.25 15h-3.5a.75.75 0 0 1-.75-.75V9H7v5.25a.75.75 0 0 1-.75.75h-3.5A1.75 1.75 0 0 1 1 13.25V6.23c0-.531.242-1.034.657-1.366l5.25-4.2Zm1.25 1.171a.25.25 0 0 0-.312 0l-5.25 4.2a.25.25 0 0 0-.094.196v7.019c0 .138.112.25.25.25H5.5V8.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 .75.75v5.25h2.75a.25.25 0 0 0 .25-.25V6.23a.25.25 0 0 0-.094-.195Z', 'github': 'M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z'};
var utterancesLoad=0;

let themeSettings={
    "dark": ["dark","moon","#00f0ff","dark-blue"],
    "light": ["light","sun","#ff5000","github-light"],
    "auto": ["auto","sync","","preferred-color-scheme"]
};
function changeTheme(mode, icon, color, utheme){
    document.documentElement.setAttribute("data-color-mode",mode);
    document.getElementById("themeSwitch").setAttribute("d",value=IconList[icon]);
    document.getElementById("themeSwitch").parentNode.style.color=color;
    if(utterancesLoad==1){utterancesTheme(utheme);}
}
function modeSwitch(){
    let currentMode=document.documentElement.getAttribute('data-color-mode');
    let newMode = currentMode === "light" ? "dark" : currentMode === "dark" ? "auto" : "light";
    localStorage.setItem("meek_theme", newMode);
    if(themeSettings[newMode]){
        changeTheme(...themeSettings[newMode]);
    }
}
function utterancesTheme(theme){
    const message={type:'set-theme',theme: theme};
    const iframe=document.getElementsByClassName('utterances-frame')[0];
    iframe.contentWindow.postMessage(message,'https://utteranc.es');
}
if(themeSettings[theme]){changeTheme(...themeSettings[theme]);}
console.log("\n %c Gmeek last https://github.com/Meekdai/Gmeek \n","padding:5px 0;background:#02d81d;color:#fff");
</script>

<script>
document.getElementById("pathHome").setAttribute("d",IconList["home"]);
document.getElementById("pathIssue").setAttribute("d",IconList["github"]);



function openComments(){
    cm=document.getElementById("comments");
    cmButton=document.getElementById("cmButton");
    cmButton.innerHTML="loading";
    span=document.createElement("span");
    span.setAttribute("class","AnimatedEllipsis");
    cmButton.appendChild(span);

    script=document.createElement("script");
    script.setAttribute("src","https://utteranc.es/client.js");
    script.setAttribute("repo","lhmax2010/lhmax2010.github.io");
    script.setAttribute("issue-term","title");
    
    if(localStorage.getItem("meek_theme")=="dark"){script.setAttribute("theme","dark-blue");}
    else if(localStorage.getItem("meek_theme")=="light") {script.setAttribute("theme","github-light");}
    else{script.setAttribute("theme","preferred-color-scheme");}
    
    script.setAttribute("crossorigin","anonymous");
    script.setAttribute("async","");
    cm.appendChild(script);

    int=self.setInterval("iFrameLoading()",200);
}

function iFrameLoading(){
    var utterances=document.getElementsByClassName('utterances');
    if(utterances.length==1){
        if(utterances[0].style.height!=""){
            utterancesLoad=1;
            int=window.clearInterval(int);
            document.getElementById("cmButton").style.display="none";
            console.log("utterances Load OK");
        }
    }
}



</script>


</html>
